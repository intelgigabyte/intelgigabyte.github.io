var e;!function(e){e[e.INIT=0]="INIT",e[e.REQUEST=1]="REQUEST"}(e||(e={}));const t=new RegExp('<span class="([^"]*?)">'),n=new RegExp("</span>");function r(e,t,n){return t===n.findIndex(function(e){return t=>e.start===t.start&&e.length===t.length&&e.className===t.className}(e))}function s(e){return-1===e.length}function i(e){const t=[...e].reverse().find(s);if(!t)throw new Error(`no unclosed range found ${e.length}`);return t}var o;function l(e){const r=t.exec(e),s=r?.index??Number.MAX_VALUE,i=n.exec(e),l=i?.index??Number.MAX_VALUE;if(s===Number.MAX_VALUE&&l===Number.MAX_VALUE)return;const a=s<l?o.OPENING:o.CLOSING,c=a===o.OPENING?r:i;if(null===c)return;const h=c[0].length,g=a===o.OPENING?s:l,f=e.slice(0,g);var u;return{type:a,lineAfter:f+e.slice(g+h),offset:(u=f,u.replace(/&#x27;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")).length,class:a===o.OPENING?c[1]:void 0}}!function(e){e[e.OPENING=0]="OPENING",e[e.CLOSING=1]="CLOSING"}(o||(o={}));const a=self;a.onmessage=function(t){try{const r=t.data;if((n=r)&&n.type===e.INIT){c.init(r.url);const e={ranges:[]};a.postMessage(e)}if(function(t){return!!t&&t.type===e.REQUEST}(r)){const e={ranges:c.highlightCode(r.language,r.code)};a.postMessage(e)}}catch(e){let t="syntax worker error";e instanceof Error&&(t=e.message);const n={error:t,ranges:[]};a.postMessage(n)}var n};const c=new class{init(e){var t;if(t=e,a.importScripts(t),!a.hljs)throw new Error("HighlightJS lib not available after import");this.highlightJsLib=a.hljs,this.highlightJsLib.configure({classPrefix:""})}highlightCode(e,t){if(!this.highlightJsLib)throw new Error("worker not initialized");return function(e){const t=[];let n=[];for(let a of e.split("\n")){const e=[...n];let c;for(n=[];void 0!==(c=l(a));){if(c.type===o.OPENING)e.push({start:c.offset,length:-1,className:c.class??""});else{const t=i(e);t.length=c.offset-t.start}a=c.lineAfter}const h=a.length;for(const t of e)s(t)&&(n.push({...t,start:0}),t.length=h-t.start);t.push({ranges:e.filter((e=>e.length>0)).filter(r)})}if(n.length>0)throw new Error("unclosed <span>s in highlighted code");return t}(this.highlightJsLib.highlight(e,t,!0).value)}};